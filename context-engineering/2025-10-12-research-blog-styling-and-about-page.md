# Research: Blog styling and About page

## Research Question
"I want to style this blog in a minimalistic style using black and white colors, and then also have a simple about page somewhere."

## Summary
The site is generated by a small Python script that converts source posts in `posts/YYYY/*.md|.rst` into static HTML under `docs/` using Pandoc with a minimal template. Styling is referenced via a single stylesheet path `/_static/theme.css` from both the Pandoc template and generated index pages. In the current repository snapshot, no `docs/_static/` directory or CSS file exists. There is no dedicated "about" page emitted by the current builder; some legacy Sphinx/ABlog-generated pages in `docs/posts/2025/...` include navigation links to an `about/` page, but there is no `docs/about/` directory present.

## Detailed Findings

### Templates and Styling Hook
- Pandoc HTML template at `templates/base.html` provides the head and body shell and links a single stylesheet: `/_static/theme.css`.

```1:14:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/templates/base.html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>$title$</title>
    <link rel="stylesheet" href="/_static/theme.css" />
  </head>
  <body>
    <main class="container">
      $body$
    </main>
  </body>
  </html>
```

- Index pages generated by the builder also include the same stylesheet link:

```124:135:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/tools/build.py
def render_home(posts_info: List[Dict[str, str]]) -> None:
    items: List[str] = []
    for p in posts_info[:10]:
        url = f"/posts/{p['year']}/{p['slug']}/"
        title = html.escape(p["title"]) if p.get("title") else p["slug"]
        items.append(f"<li><a href='{url}'>{title}</a></li>")
    html_doc = (
        "<html><head><meta charset='utf-8'><link rel='stylesheet' href='/_static/theme.css'></head>"
        "<body><h1>Kasper Junge Blog</h1><ul>" + "\n".join(items) + "</ul></body></html>"
    )
    (DOCS_DIR / "index.html").write_text(html_doc, encoding="utf-8")
```

```149:155:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/tools/build.py
        out_dir.mkdir(parents=True, exist_ok=True)
        html_doc = (
            "<html><head><meta charset='utf-8'><link rel='stylesheet' href='/_static/theme.css'></head>"
            f"<body><h1>{year}</h1><ul>" + "\n".join(items) + "</ul></body></html>"
        )
        (out_dir / "index.html").write_text(html_doc, encoding="utf-8")
```

- Current published `docs/index.html` shows the same stylesheet reference:

```1:3:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/docs/index.html
<html><head><meta charset='utf-8'><link rel='stylesheet' href='/_static/theme.css'></head><body><h1>Kasper Junge Blog</h1><ul><li><a href='/posts/2023/prompting-patterns-the-clarification-pattern/'>Prompting Patterns: The Clarification Pattern</a></li>
<li><a href='/posts/2023/text-classifiers-are-an-underrated-use-case-of-llms/'>Text Classifiers are an Underrated Application of LLMs</a></li>
<li><a href='/posts/2023/a-process-for-building-llm-classifiers/'>A Process for Building LLM Classifiers</a></li></ul></body></html>
```

### Builder and Output Structure
- Constants defining source, output, and template locations:

```12:15:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/tools/build.py
POSTS_DIR = Path("posts")
DOCS_DIR = Path("docs")
TEMPLATE = Path("templates/base.html")
```

- Each post is rendered via Pandoc using the template above; output path is `docs/posts/<year>/<slug>/index.html`:

```100:121:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/tools/build.py
def render_post(year: str, src: Path) -> Path:
    slug = derive_slug(src)
    out_dir = DOCS_DIR / "posts" / year / slug
    out_dir.mkdir(parents=True, exist_ok=True)
    out_html = out_dir / "index.html"

    input_format = (
        "markdown+yaml_metadata_block" if src.suffix.lower() == ".md" else "rst"
    )
    cmd = [
        "pandoc",
        str(src),
        "--standalone",
        "--from",
        input_format,
        "--template",
        str(TEMPLATE),
        "--output",
        str(out_html),
    ]
    subprocess.run(cmd, check=True)
    return out_html
```

- Static asset copying currently mirrors only `img/**` to `docs/img/**`:

```163:174:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/tools/build.py
def copy_assets() -> None:
    """Mirror img/** to docs/img/**, preserving relative paths."""
    src_root = Path("img")
    dst_root = DOCS_DIR / "img"
    if not src_root.exists():
        return
    for p in src_root.rglob("*"):
        if p.is_file():
            out_path = dst_root / p.relative_to(src_root)
            out_path.parent.mkdir(parents=True, exist_ok=True)
            shutil.copy2(p, out_path)
```

#### Observed Output Layout
- Current `docs/` listing shows `blog/`, `img/`, `index.html`, and many `posts/` subtrees, but no `_static/` and no `about/`:
  - `docs/` contains: `blog/2023/index.html`, `img/mcp-scenarios.png`, `index.html`, and `posts/...` (many).
  - No `docs/_static/` directory is present in this snapshot.
  - No `docs/about/` directory exists.

### Serving and Deployment
- Local serve runs a build then `python -m http.server -d docs 8000` (serving `docs/` at web root):

```4:6:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/serve.py
def serve():
    subprocess.run("uv run python tools/build.py", shell=True)
    subprocess.run("python -m http.server -d docs 8000", shell=True)
```

- Deployment builds, commits, and pushes the repository; GitHub Pages is configured to serve from `docs/`:

```4:21:/Users/kasperjunge/gitrepo/writing/kasperjunge.github.io/deploy.py
def deploy():
    
    # 1. Get the path to the build directory
    build_path = str((Path(__file__).parent / "docs").resolve())

    # 2. Build the blog
    subprocess.run("uv run python tools/build.py", shell=True)

    # 3. Commit the blog updates
    subprocess.run("git add .", shell=True)
    subprocess.run('git commit -m "update blog"', shell=True)

    # 4. Deploy the blog to GitHub pages (via git push and GH Pages serving from docs/)
    # Keeping this as a simple push; Pages is configured to serve from docs/ on main

    # 5. Push the updates to the repository
    subprocess.run("git push", shell=True)
```

### About Page References
- Some pages under `docs/posts/2025/...` (legacy Sphinx/ABlog output) include navigation to an About page at `../../../about/` and labels like "About me". Example references (line numbers from a generated page):
  - `docs/posts/2025/organizing-chaos/index.html:140-141` (nav link "About me" to `../../../about/`).
  - Similar references appear in several other 2025 posts.

- There is no `docs/about/` directory in the current tree listing, and the current builder (`tools/build.py`) does not emit any non-post pages besides the home page and yearly index pages.

#### Key Files
- `templates/base.html` — Minimal Pandoc template; links `/_static/theme.css`.
- `tools/build.py` — Discovers posts, renders each via Pandoc with `templates/base.html`; generates home (`docs/index.html`) and yearly archives (`docs/blog/<year>/index.html`); mirrors `img/**` to `docs/img/**`.
  - Key functions: `render_post()` at lines 100–121; `render_home()` at lines 124–135; `render_year_archives()` at lines 137–155; `copy_assets()` at lines 163–174; `main()` at lines 176–201.
- `serve.py` — Builds then serves `docs/` via `http.server`.
- `deploy.py` — Builds, commits, and pushes to remote.

#### Information Flow
- Entry point: `tools/build.py:176-201` (`main()`)
- Discovery: `discover_posts()` yields `(year, src)` from `posts/YYYY/`.
- Rendering: `render_post()` invokes Pandoc with `templates/base.html` to produce `docs/posts/<year>/<slug>/index.html`.
- Assets: `copy_assets()` mirrors images to `docs/img/`.
- Indices: `build_indices()` writes `docs/index.html` and `docs/blog/<year>/index.html`, both referencing `/_static/theme.css`.

#### Existing Patterns

**Templating**
- Pandoc template variables are used (`$title$`, `$body$`) in `templates/base.html`.

**Styling Hook**
- A single global stylesheet is referenced from both per-post and index pages at `/_static/theme.css`.

**Content Organization**
- Source posts reside in `posts/YYYY/` as `.md` or `.rst`.
- Output pages are under `docs/posts/YYYY/<slug>/index.html`.
- Indexes: `docs/index.html` (home) and `docs/blog/YYYY/index.html` (yearly list).

#### Integration Points
- External tool: Pandoc CLI is invoked to convert Markdown/RST to HTML using the provided template.
- File system: Writes to `docs/` structure; reads from `posts/` and `templates/`.

## Code References
- `templates/base.html:1-14` — Pandoc template; includes stylesheet link `/_static/theme.css`.
- `tools/build.py:12-15` — Defines `POSTS_DIR`, `DOCS_DIR`, and `TEMPLATE`.
- `tools/build.py:100-121` — `render_post()` uses Pandoc with the template; writes per-post HTML.
- `tools/build.py:124-135` — `render_home()` builds `docs/index.html` with a stylesheet link.
- `tools/build.py:149-155` — Yearly archive pages include the same stylesheet link.
- `tools/build.py:163-174` — `copy_assets()` mirrors only `img/**` to `docs/img/**`.
- `serve.py:4-6` — Serves `docs/` locally after build.
- `deploy.py:4-21` — Builds and pushes to remote for GitHub Pages.

## Architecture Documentation
- Minimal static site generator pipeline:
  - Inputs: `posts/YYYY/*.md|.rst`
  - Processor: Pandoc via `tools/build.py` using `templates/base.html`
  - Outputs: `docs/posts/YYYY/<slug>/index.html`, `docs/index.html`, `docs/blog/YYYY/index.html`
  - Static assets: currently only `img/**` copied to `docs/img/**`
  - Styling reference: `/_static/theme.css` expected to be served from `docs/_static/theme.css` when `docs/` is the web root

## Open Questions
- Where should the global stylesheet (`theme.css`) live and be tracked (e.g., `docs/_static/theme.css`)? No `_static/` directory exists in the current snapshot.
- Should there be a generated or static `docs/about/` page? Current builder does not emit one, though some legacy pages reference `about/`.
- Are additional static asset directories (besides `img/`) intended to be mirrored into `docs/`?


